<Page
    x:Class="PowerToys.FileLocksmithUI.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:tkcontrols="using:CommunityToolkit.WinUI.Controls"
    xmlns:viewModels="using:PowerToys.FileLocksmithUI.ViewModels"
    mc:Ignorable="d">
    <Page.DataContext>
        <viewModels:SettingsViewModel />
    </Page.DataContext>
    <ScrollViewer>
        <StackPanel Padding="24,24,24,32" Spacing="16">
            <StackPanel Spacing="4">
                <TextBlock FontSize="28" FontWeight="SemiBold" Text="设置" />
                <TextBlock
                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                    Text="管理右键菜单注册与显示方式。" />
            </StackPanel>

            <tkcontrols:SettingsCard
                Header="右键菜单注册"
                Description="切换后将以管理员权限执行注册/卸载脚本。">
                <tkcontrols:SettingsCard.Content>
                    <ToggleSwitch
                        x:Name="ContextMenuToggle"
                        IsOn="{Binding IsContextMenuRegistered, Mode=TwoWay}"
                        Toggled="ContextMenuToggle_Toggled"
                        OffContent="未注册"
                        OnContent="已注册" />
                </tkcontrols:SettingsCard.Content>
            </tkcontrols:SettingsCard>

            <tkcontrols:SettingsCard
                Header="扩展菜单显示"
                Description="开启后仅在“显示更多选项”中显示。">
                <tkcontrols:SettingsCard.Content>
                    <ToggleSwitch
                        IsOn="{Binding ShowInExtendedContextMenu, Mode=TwoWay}"
                        Toggled="ExtendedMenuToggle_Toggled"
                        OffContent="普通菜单可见"
                        OnContent="仅扩展菜单" />
                </tkcontrols:SettingsCard.Content>
            </tkcontrols:SettingsCard>

            <tkcontrols:SettingsCard
                Header="命令行（CLI）"
                Description="将程序目录加入或移除当前用户 PATH，便于直接运行 FileLocksmithCLI.exe。">
                <tkcontrols:SettingsCard.Content>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button
                            Content="加入 PATH（当前用户）"
                            Click="AddToPathButton_Click" />
                        <Button
                            Content="移除 PATH（当前用户）"
                            Click="RemoveFromPathButton_Click" />
                    </StackPanel>
                </tkcontrols:SettingsCard.Content>
            </tkcontrols:SettingsCard>

            <tkcontrols:SettingsCard
                Header="日志"
                Description="删除本地日志目录。">
                <tkcontrols:SettingsCard.Content>
                    <Button
                        Content="删除日志目录"
                        Click="ClearLogsButton_Click" />
                </tkcontrols:SettingsCard.Content>
            </tkcontrols:SettingsCard>

            <TextBlock
                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                Text="{Binding StatusMessage}" />
        </StackPanel>
    </ScrollViewer>
</Page>
